<div class=" w-8/12 flex flex-col justify-between bg-violet-50" style="height: 30.2rem;">
    <div class="bg-[#D8B4FE] rounded-lg overflow-auto">
        <div class="flex items-center justify-between  h-16 p-2 bg-opacity-80 bg-slate-400/20   ">
            <div class="flex justify-center items-center">
                <div class="w-10 h-10 rounded-full bg-violet-200 flex items-center justify-center font-semibold text-xs capitalize">{{freelancer.freelancer.username}}</div>
                <div class=" flex flex-col " v-if="freelancer && JobPost">
                    <span class=" font-semibold ml-2 text-purple">{{freelancer.freelancer.first_name}} {{freelancer.freelancer.lastname}} ({{JobPost.title}})</span>
                    <span class=" font-light ml-2 text-purple ">@{{freelancer.freelancer.username}}</span>
                </div>
            </div>
            <Icon icon="charm:menu-kebab" class="ml-10 m-5 cursor-pointer text-violet-600"/>
        </div>
    </div>
    <div class="flex flex-col h-5/6">
        <div class="mb-2 h-5/6 overflow-scroll" ref="messagesRef" >
            <Loading v-if="isLoading" />
            <div v-for="message in messages" :key="message.id" :class=" message.sender === user.id ? 'flex justify-end items-center':'flex justify-start items-center ' " v-if="user">
                <span class="font-light mr-2 flex items-center" v-show="message.sender == user.id"><Icon icon="material-symbols:done" width="20" height="20" />{{(message.created_at).substring(12,16)}}</span>
                <div class=" px-5 py-1 my-5 mr-10 rounded-xl shadow-lg flex flex-col items-end text-white bg-[#9333EA]"  v-if="message.sender == user.id"> 
                    <span class="mr-2">{{ message.message }} </span>
                </div>                
                <div class="w-8 h-8 rounded-full bg-violet-600 mx-3" v-else></div>
                <span class=" px-5 py-1 my-5 rounded-xl shadow-lg bg-white"  v-show="message.sender !== user.id">{{ message.message }} </span>
                <span class="font-light ml-2" v-show="message.sender !== user.id">{{(message.created_at).substring(12,16)}}</span>                
            </div>
        </div>
        
        <div class=" w-full flex items-center justify-between bg-transparent border-nice-purple rounded-lg m-2" style="border: solid 0.5px rgb(124 58 237);">
            <input v-model="newMessage" @keyup.enter="sendMessage" type="text" class="w-3/4 focus:outline-none px-5 placeholder:text-text-spc-purple/60 text-text-spc-purple py-1 bg-transparent " placeholder="Write message">
            <div class="flex w-1/4 justify-end">
                <Icon class="text-violet-600 cursor-pointer w-5 h-5 m-2" icon="material-symbols:upload" />
                <Icon @click="sendMessage" class="text-violet-600 cursor-pointer w-5 h-5 mr-10 m-2 " icon="material-symbols:send" />
            </div>
        </div>
    </div>
</div>
